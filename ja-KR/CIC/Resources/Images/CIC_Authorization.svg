<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1220.6863px" preserveAspectRatio="none" style="width:883px;height:1220px;" version="1.1" viewBox="0 0 883 1220" width="883.8279px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="184.5019" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="116.9647" y="1018.8582"/><rect fill="#FFFFFF" height="243.6073" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="322.3973" y="57.1889"/><rect fill="#FFFFFF" height="25.5196" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="322.3973" y="400.703"/><rect fill="#FFFFFF" height="502.9367" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="322.3973" y="515.9216"/><rect fill="#FFFFFF" height="56.9638" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="582.697" y="147.3282"/><rect fill="#FFFFFF" height="408.574" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="733.6878" y="275.2766"/><rect fill="#FFFFFF" height="42.943" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="733.6878" y="831.7745"/><rect fill="#FFFFFF" height="42.943" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="733.6878" y="1103.8637"/><rect fill="#FFFFFF" height="25.5196" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="836.6167" y="917.6605"/><rect fill="#FFFFFF" height="13.6104" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="836.6167" y="1189.7497"/><rect fill="#FFFFFF" height="377.0999" rx="4.2533" ry="4.2533" style="stroke: #000000; stroke-width: 1.7013049782503624;" width="593.3301" x="222.871" y="313.556"/><rect fill="#FFFFFF" height="257.6281" style="stroke: none; stroke-width: 0.8506524891251812;" width="593.3301" x="222.871" y="433.0278"/><rect fill="#FFFFFF" height="493.9899" rx="4.2533" ry="4.2533" style="stroke: #000000; stroke-width: 1.7013049782503624;" width="862.987" x="11.0585" y="702.565"/><rect fill="#FFFFFF" height="246.5696" style="stroke: none; stroke-width: 0.8506524891251812;" width="862.987" x="11.0585" y="949.9853"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 5.0,5.0;" x1="120.7927" x2="120.7927" y1="48.6824" y2="1211.016"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 5.0,5.0;" x1="326.6506" x2="326.6506" y1="48.6824" y2="1211.016"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 5.0,5.0;" x1="586.5249" x2="586.5249" y1="48.6824" y2="1211.016"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 5.0,5.0;" x1="737.941" x2="737.941" y1="48.6824" y2="1211.016"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 5.0,5.0;" x1="840.87" x2="840.87" y1="48.6824" y2="1211.016"/><rect fill="#9EA0CA" height="45.2798" rx="4.2533" ry="4.2533" style="stroke: #FFFFFF; stroke-width: 1.2759787336877717;" width="203.3059" x="19.565" y="2.552"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.9091" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174.3838" x="34.0261" y="30.7539">GUIを提供しないクライアント</text><rect fill="#9EA0CA" height="45.2798" rx="4.2533" ry="4.2533" style="stroke: #FFFFFF; stroke-width: 1.2759787336877717;" width="190.5462" x="231.3775" y="2.552"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.9091" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="161.624" x="245.8386" y="30.7539">GUIを提供するクライアント</text><rect fill="#05D686" height="45.2798" rx="4.2533" ry="4.2533" style="stroke: #FFFFFF; stroke-width: 1.2759787336877717;" width="145.4616" x="514.2194" y="2.552"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.9091" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116.5394" x="528.6805" y="30.7539">NAVER認可サーバー</text><rect fill="#05D686" height="45.2798" rx="4.2533" ry="4.2533" style="stroke: #FFFFFF; stroke-width: 1.2759787336877717;" width="139.507" x="668.1875" y="2.552"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.9091" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110.5848" x="682.6486" y="30.7539">Clova認可サーバー</text><rect fill="#05D686" height="45.2798" rx="4.2533" ry="4.2533" style="stroke: #FFFFFF; stroke-width: 1.2759787336877717;" width="49.3378" x="816.2011" y="2.552"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.9091" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20.4157" x="830.6622" y="30.7539">CIC</text><rect fill="#FFFFFF" height="184.5019" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="116.9647" y="1018.8582"/><rect fill="#FFFFFF" height="243.6073" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="322.3973" y="57.1889"/><rect fill="#FFFFFF" height="25.5196" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="322.3973" y="400.703"/><rect fill="#FFFFFF" height="502.9367" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="322.3973" y="515.9216"/><rect fill="#FFFFFF" height="56.9638" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="582.697" y="147.3282"/><rect fill="#FFFFFF" height="408.574" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="733.6878" y="275.2766"/><rect fill="#FFFFFF" height="42.943" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="733.6878" y="831.7745"/><rect fill="#FFFFFF" height="42.943" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="733.6878" y="1103.8637"/><rect fill="#FFFFFF" height="25.5196" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="836.6167" y="917.6605"/><rect fill="#FFFFFF" height="13.6104" style="stroke: #000000; stroke-width: 0.8506524891251812;" width="8.5065" x="836.6167" y="1189.7497"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="366.6312" y1="93.3267" y2="93.3267"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="366.6312" x2="366.6312" y1="93.3267" y2="104.3852"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="331.7545" x2="366.6312" y1="104.3852" y2="104.3852"/><polygon fill="#000000" points="340.261,100.9826,331.7545,104.3852,340.261,107.7878,336.8584,104.3852" style="stroke: #000000; stroke-width: 0.8506524891251812;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="74.8574" x="345.3649" y="80.876">NAVERログイン</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="580.9957" x2="572.4891" y1="147.3282" y2="143.9256"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="580.9957" x2="572.4891" y1="147.3282" y2="150.7308"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="581.8463" y1="147.3282" y2="147.3282"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="156.5201" x="378.5404" y="134.8774">NAVERアカウント情報を送信する</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="204.292" y2="200.8894"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="204.292" y2="207.6946"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="330.9038" x2="586.0996" y1="204.292" y2="204.292"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="95.2731" x="411.2905" y="177.8204">NAVERアカウントの</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="132.7018" x="392.5761" y="191.8412">アクセストークンを送信する</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="275.2766" y2="271.874"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="275.2766" y2="278.6792"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="732.8371" y1="275.2766" y2="275.2766"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="231.3775" x="408.5259" y="234.7842">認可コードをリクエストする(次の情報を送信する)</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="182.8903" x="408.5259" y="248.8051">- NAVERアカウントのアクセストークン</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="247.5399" x="408.5259" y="262.8259">- クライアント認証情報(CLOVA_OAUTH_CLIENT_ID)</text><path d="M227.1242,313.556 L290.0725,313.556 L290.0725,337.3743 L281.566,345.8808 L222.871,345.8808 L222.871,317.8093 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.8506524891251812;"/><rect fill="none" height="377.0999" rx="4.2533" ry="4.2533" style="stroke: #000000; stroke-width: 1.7013049782503624;" width="593.3301" x="222.871" y="313.556"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.9091" x="244.1373" y="334.691">alt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="243.2866" x="311.3388" y="335.5417">["利用規約に同意しているか" == "同意している"]</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="400.703" y2="397.3004"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="400.703" y2="404.1056"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="330.9038" x2="732.8371" y1="400.703" y2="400.703"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="143.7603" x="460.4157" y="388.2523">認可コードを送信する(200 OK)</text><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="222.871" x2="816.2011" y1="433.8785" y2="433.8785"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="244.1373" x="235.6307" y="454.1629">[利用規約に同意しているか == "同意していない"]</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="515.9216" y2="512.519"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="515.9216" y2="519.3242"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="330.9038" x2="732.8371" y1="515.9216" y2="515.9216"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="173.5331" x="444.6786" y="489.45">authorization、redirect_uriを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="175.2344" x="444.6786" y="503.4708">(451 Unavailable For Legal Reasons)</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="366.6312" y1="558.8646" y2="558.8646"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="366.6312" x2="366.6312" y1="558.8646" y2="569.923"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="331.7545" x2="366.6312" y1="569.923" y2="569.923"/><polygon fill="#000000" points="340.261,566.5204,331.7545,569.923,340.261,573.3257,336.8584,569.923" style="stroke: #000000; stroke-width: 0.8506524891251812;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="222.871" x="345.3649" y="546.4138">利用規約ページ(redirect_uri)にリダイレクトする</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="612.866" y2="609.4634"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="612.866" y2="616.2687"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="732.8371" y1="612.866" y2="612.866"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="192.2475" x="436.1721" y="600.4153">利用規約への同意結果を送信する(submit)</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="683.8507" y2="680.4481"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="683.8507" y2="687.2533"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="330.9038" x2="737.0904" y1="683.8507" y2="683.8507"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="128.4485" x="453.1851" y="643.3583">結果を送信する(302 Found)</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="162.4746" x="453.1851" y="657.3791">- 成功：clova://agreement-success</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="151.4161" x="453.1851" y="671.3999">- 失敗：clova://agreement-failure</text><path d="M15.3117,702.565 L78.26,702.565 L78.26,726.3833 L69.7535,734.8898 L11.0585,734.8898 L11.0585,706.8183 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.8506524891251812;"/><rect fill="none" height="493.9899" rx="4.2533" ry="4.2533" style="stroke: #000000; stroke-width: 1.7013049782503624;" width="862.987" x="11.0585" y="702.565"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.9091" x="32.3248" y="723.7001">alt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="281.566" x="99.5263" y="724.5507">["クライアントタイプ" == "GUIを提供するクライアント"]</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="831.7745" y2="828.3719"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="831.7745" y2="835.1771"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="732.8371" y1="831.7745" y2="831.7745"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="281.566" x="372.7985" y="777.2613">Clovaアクセストークンをリクエストし、次の情報を送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="182.8903" x="372.7985" y="791.2821">- NAVERアカウントのアクセストークン</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="108.0329" x="372.7985" y="805.3029">- クライアント認証情報</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="313.8908" x="377.9024" y="819.3237">(CLOVA_OAUTH_CLIENT_ID、CLOVA_OAUTH_CLIENT_SECRET)</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="874.7175" y2="871.3149"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="339.4103" y1="874.7175" y2="878.1201"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="330.9038" x2="737.0904" y1="874.7175" y2="874.7175"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="159.072" x="454.8864" y="862.2667">Clovaアクセストークンを送信する</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="834.9154" x2="826.4089" y1="917.6605" y2="914.2579"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="834.9154" x2="826.4089" y1="917.6605" y2="921.0631"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="330.9038" x2="835.7661" y1="917.6605" y2="917.6605"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="258.5984" x="454.4611" y="905.2097">Clovaアクセストークンを使ってCICとの接続を開始する</text><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="11.0585" x2="874.0454" y1="950.8359" y2="950.8359"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="292.6245" x="23.8183" y="971.1203">["クライアントタイプ" == "GUIを提供しないクライアント"]</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="133.9778" y1="1018.8582" y2="1015.4556"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="133.9778" y1="1018.8582" y2="1022.2608"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="325.7999" y1="1018.8582" y2="1018.8582"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="102.0783" x="175.0217" y="1006.4075">認可コードを送信する</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="1103.8637" y2="1100.461"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="731.9865" x2="723.4799" y1="1103.8637" y2="1107.2663"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="732.8371" y1="1103.8637" y2="1103.8637"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="281.566" x="270.0822" y="1049.3505">Clovaアクセストークンをリクエストし、次の情報を送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="182.8903" x="270.0822" y="1063.3713">- NAVERアカウントのアクセストークン</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="108.0329" x="270.0822" y="1077.3921">- クライアント認証情報</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="313.8908" x="275.1861" y="1091.4129">(CLOVA_OAUTH_CLIENT_ID、CLOVA_OAUTH_CLIENT_SECRET)</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="133.9778" y1="1146.8067" y2="1143.404"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="133.9778" y1="1146.8067" y2="1150.2093"/><line style="stroke: #000000; stroke-width: 0.8506524891251812; stroke-dasharray: 2.0,2.0;" x1="125.4712" x2="737.0904" y1="1146.8067" y2="1146.8067"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="159.072" x="352.1701" y="1134.3559">Clovaアクセストークンを送信する</text><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="834.9154" x2="826.4089" y1="1189.7497" y2="1186.347"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="834.9154" x2="826.4089" y1="1189.7497" y2="1193.1523"/><line style="stroke: #000000; stroke-width: 0.8506524891251812;" x1="125.4712" x2="835.7661" y1="1189.7497" y2="1189.7497"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="10.2078" lengthAdjust="spacingAndGlyphs" textLength="258.5984" x="351.7448" y="1177.2989">Clovaアクセストークンを使ってCICとの接続を開始する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Malgun Gothic", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

participant "GUIを提供しないクライアント" as device #9EA0CA
participant "GUIを提供するクライアント" as app #9EA0CA
participant "NAVER認可サーバー" as nauth #05D686
participant "Clova認可サーバー" as cauth #05D686
participant CIC as cic #05D686

activate app
  app -> app: NAVERログイン

  app ->> nauth: NAVERアカウント情報を送信する

  activate nauth
    nauth - ->> app: NAVERアカウントの\nアクセストークンを送信する
  deactivate nauth

  app ->> cauth: 認可コードをリクエストする(次の情報を送信する)\l- NAVERアカウントのアクセストークン\l- クライアント認証情報(CLOVA_OAUTH_CLIENT_ID)

activate cauth

deactivate app

alt "利用規約に同意しているか" == "同意している"
    cauth - ->> app: 認可コードを送信する(200 OK)
    activate app
    deactivate app
else 利用規約に同意しているか == "同意していない"
  cauth - ->> app: authorization、redirect_uriを送信する\l(451 Unavailable For Legal Reasons)
  activate app
    app -> app: 利用規約ページ(redirect_uri)にリダイレクトする
    app ->> cauth: 利用規約への同意結果を送信する(submit)
    cauth - ->> app: 結果を送信する(302 Found)\l- 成功：clova://agreement-success\l- 失敗：clova://agreement-failure
  deactivate cauth
end

alt "クライアントタイプ" == "GUIを提供するクライアント"
  app ->> cauth: Clovaアクセストークンをリクエストし、次の情報を送信する\l- NAVERアカウントのアクセストークン\l- クライアント認証情報\l  (CLOVA_OAUTH_CLIENT_ID、CLOVA_OAUTH_CLIENT_SECRET)

  activate cauth
    cauth - ->> app: Clovaアクセストークンを送信する
  deactivate cauth

  app ->> cic: Clovaアクセストークンを使ってCICとの接続を開始する
  activate cic
  deactivate cic

else "クライアントタイプ" == "GUIを提供しないクライアント"
  app ->> device: 認可コードを送信する
  deactivate app

  activate device
    device ->> cauth: Clovaアクセストークンをリクエストし、次の情報を送信する\l- NAVERアカウントのアクセストークン\l- クライアント認証情報\l  (CLOVA_OAUTH_CLIENT_ID、CLOVA_OAUTH_CLIENT_SECRET)

    activate cauth
        cauth - ->> device: Clovaアクセストークンを送信する
    deactivate cauth

    device ->> cic: Clovaアクセストークンを使ってCICとの接続を開始する

    activate cic
  end

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS949
Language: en
Country: US
--></g></svg>