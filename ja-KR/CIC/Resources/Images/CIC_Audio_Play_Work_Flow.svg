<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="687.2458px" preserveAspectRatio="none" style="width:874px;height:687px;" version="1.1" viewBox="0 0 874 687" width="874.3068px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="54.4631" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="139.4396"/><rect fill="#FFFFFF" height="112.6004" style="stroke: #FFFFFF; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="286.5912"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="245.6192" y1="286.5912" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="253.7523" y1="286.5912" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="253.7523" y1="286.5912" y2="286.5912"/><rect fill="#FFFFFF" height="47.9566" style="stroke: #FFFFFF; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="451.6357"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="245.6192" y1="451.6357" y2="499.5923"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="253.7523" y1="451.6357" y2="499.5923"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="253.7523" y1="499.5923" y2="499.5923"/><rect fill="#FFFFFF" height="116.2745" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="554.0554"/><rect fill="#FFFFFF" height="92.6886" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="725.4713" y="193.9026"/><rect fill="#FFFFFF" height="54.4631" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="725.4713" y="499.5923"/><rect fill="#FFFFFF" height="261.771" rx="4.0665" ry="4.0665" style="stroke: #000000; stroke-width: 1.6266173752310535;" width="570.1294" x="191.1275" y="350.4217"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="38.2255" x2="38.2255" y1="83.3498" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268; stroke-dasharray: 1.0,4.0;" x1="38.2255" x2="38.2255" y1="399.1916" y2="451.6357"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="38.2255" x2="38.2255" y1="451.6357" y2="677.6498"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="249.6858" x2="249.6858" y1="83.3498" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268; stroke-dasharray: 1.0,4.0;" x1="249.6858" x2="249.6858" y1="399.1916" y2="451.6357"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="249.6858" x2="249.6858" y1="451.6357" y2="677.6498"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="729.5379" x2="729.5379" y1="83.3498" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268; stroke-dasharray: 1.0,4.0;" x1="729.5379" x2="729.5379" y1="399.1916" y2="451.6357"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="729.5379" x2="729.5379" y1="451.6357" y2="677.6498"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42.2921" x="14.6396" y="73.0723">ユーザー</text><ellipse cx="38.2255" cy="10.573" fill="#9EA0CA" rx="6.5065" ry="6.5065" style="stroke: #000000; stroke-width: 1.6266173752310535;"/><path d="M38.2255,17.0795 L38.2255,39.0388 M27.6525,23.586 L48.7985,23.586 M38.2255,39.0388 L27.6525,51.2384 M38.2255,39.0388 L48.7985,51.2384 " fill="none" style="stroke: #000000; stroke-width: 1.6266173752310535;"/><rect fill="#9EA0CA" height="43.292" rx="4.0665" ry="4.0665" style="stroke: #FFFFFF; stroke-width: 1.21996303142329;" width="100.8503" x="199.2606" y="39.2445"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.3863" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73.1978" x="213.0869" y="66.2084">クライアント</text><rect fill="#05D686" height="43.292" rx="4.0665" ry="4.0665" style="stroke: #FFFFFF; stroke-width: 1.21996303142329;" width="47.1719" x="705.9519" y="39.2445"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="11.3863" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19.5194" x="719.7782" y="66.2084">CIC</text><rect fill="#FFFFFF" height="54.4631" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="139.4396"/><rect fill="#FFFFFF" height="112.6004" style="stroke: #FFFFFF; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="286.5912"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="245.6192" y1="286.5912" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="253.7523" y1="286.5912" y2="399.1916"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="253.7523" y1="286.5912" y2="286.5912"/><rect fill="#FFFFFF" height="47.9566" style="stroke: #FFFFFF; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="451.6357"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="245.6192" y1="451.6357" y2="499.5923"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="253.7523" y1="451.6357" y2="499.5923"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="245.6192" x2="253.7523" y1="499.5923" y2="499.5923"/><rect fill="#FFFFFF" height="116.2745" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="245.6192" y="554.0554"/><rect fill="#FFFFFF" height="92.6886" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="725.4713" y="193.9026"/><rect fill="#FFFFFF" height="54.4631" style="stroke: #000000; stroke-width: 0.8133086876155268;" width="8.1331" x="725.4713" y="499.5923"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="243.9926" x2="235.8595" y1="139.4396" y2="136.1863"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="243.9926" x2="235.8595" y1="139.4396" y2="142.6928"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="38.2255" x2="244.8059" y1="139.4396" y2="139.4396"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="175.6747" x="54.085" y="114.1301">音楽を再生するようにリクエストする：</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="107.3567" x="88.244" y="127.5354">「楽しい曲を再生して」</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="723.8447" x2="715.7116" y1="193.9026" y2="190.6494"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="723.8447" x2="715.7116" y1="193.9026" y2="197.1559"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="249.6858" x2="724.658" y1="193.9026" y2="193.9026"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="146.3956" x="414.3808" y="168.5932">ユーザーのリクエストを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="179.7412" x="397.7079" y="181.9985">(SpeechRecognizer.Recognizeイベント)</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="733.6044" x2="767.7634" y1="234.9604" y2="234.9604"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="767.7634" x2="767.7634" y1="234.9604" y2="245.5334"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="734.4177" x2="767.7634" y1="245.5334" y2="245.5334"/><polygon fill="#000000" points="742.5508,242.2802,734.4177,245.5334,742.5508,248.7867,739.2976,245.5334" style="stroke: #000000; stroke-width: 0.8133086876155268;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="117.1165" x="747.4307" y="223.0563">ユーザーの発話を解析する</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="261.8854" y1="286.5912" y2="283.338"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="261.8854" y1="286.5912" y2="289.8445"/><line style="stroke: #000000; stroke-width: 0.8133086876155268; stroke-dasharray: 2.0,2.0;" x1="253.7523" x2="728.7246" y1="286.5912" y2="286.5912"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="265.9519" x="358.6691" y="274.6871">オーディオ再生を指示する(AudioPlayer.Playディレクティブ)</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="287.9113" y1="327.649" y2="327.649"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="287.9113" x2="287.9113" y1="327.649" y2="338.222"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="254.5656" x2="287.9113" y1="338.222" y2="338.222"/><polygon fill="#000000" points="262.6987,334.9688,254.5656,338.222,262.6987,341.4753,259.4455,338.222" style="stroke: #000000; stroke-width: 0.8133086876155268;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="328.5767" x="267.5786" y="315.7449">AudioPlayer.PlayディレクティブのaudioItem.streamフィールドを解析する</text><path d="M195.1941,350.4217 L258.6322,350.4217 L258.6322,373.1943 L250.4991,381.3274 L191.1275,381.3274 L191.1275,354.4882 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.8133086876155268;"/><rect fill="none" height="261.771" rx="4.0665" ry="4.0665" style="stroke: #000000; stroke-width: 1.6266173752310535;" width="570.1294" x="191.1275" y="350.4217"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14.6396" x="211.4603" y="370.6289">opt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180.5545" x="278.9649" y="371.4422">[audioItem.stream.urlPlayable == false]</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="243.9926" x="261.8854" y="429.9718">オーディオ再生が開始される直前まで時間が経過した後</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="723.8447" x2="715.7116" y1="499.5923" y2="496.3391"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="723.8447" x2="715.7116" y1="499.5923" y2="502.8456"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="249.6858" x2="724.658" y1="499.5923" y2="499.5923"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="440" x="267.5786" y="474.2829">audioItem.streamフィールドの情報を使って、実際のオーディオストリームの情報をリクエストする</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="182.9945" x="396.0813" y="487.6882">(AudioPlayer.StreamRequestedイベント)</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="261.8854" y1="554.0554" y2="550.8022"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="261.8854" y1="554.0554" y2="557.3087"/><line style="stroke: #000000; stroke-width: 0.8133086876155268; stroke-dasharray: 2.0,2.0;" x1="253.7523" x2="728.7246" y1="554.0554" y2="554.0554"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="224.4732" x="379.4085" y="528.746">再生できるオーディオストリームの情報を送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="193.5675" x="394.8614" y="542.1513">(AudioPlayer.StreamDeliverディレクティブ)</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="287.9113" y1="595.1132" y2="595.1132"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="287.9113" x2="287.9113" y1="595.1132" y2="605.6862"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="254.5656" x2="287.9113" y1="605.6862" y2="605.6862"/><polygon fill="#000000" points="262.6987,602.433,254.5656,605.6862,262.6987,608.9395,259.4455,605.6862" style="stroke: #000000; stroke-width: 0.8133086876155268;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="352.1627" x="267.5786" y="583.209">AudioPlayer.StreamDeliverディレクティブのaudioStreamフィールドを解析する</text><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="253.7523" x2="287.9113" y1="652.4372" y2="652.4372"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="287.9113" x2="287.9113" y1="652.4372" y2="663.0102"/><line style="stroke: #000000; stroke-width: 0.8133086876155268;" x1="254.5656" x2="287.9113" y1="663.0102" y2="663.0102"/><polygon fill="#000000" points="262.6987,659.757,254.5656,663.0102,262.6987,666.2634,259.4455,663.0102" style="stroke: #000000; stroke-width: 0.8133086876155268;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="9.7597" lengthAdjust="spacingAndGlyphs" textLength="117.1165" x="267.5786" y="640.533">オーディオ再生を開始する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Malgun Gothic", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

actor ユーザー as user #9EA0CA
participant クライアント as client #9EA0CA
participant CIC as cic #05D686


user ->> client : 音楽を再生するようにリクエストする：\n「楽しい曲を再生して」

activate client
  client ->> cic : ユーザーのリクエストを送信する\n(SpeechRecognizer.Recognizeイベント)
deactivate client

activate cic
  cic -> cic : ユーザーの発話を解析する
  cic - ->> client : オーディオ再生を指示する(AudioPlayer.Playディレクティブ)
deactivate cic

activate client
  client -> client : AudioPlayer.PlayディレクティブのaudioItem.streamフィールドを解析する

opt audioItem.stream.urlPlayable == false

... オーディオ再生が開始される直前まで時間が経過した後 ...

  client ->> cic : audioItem.streamフィールドの情報を使って、実際のオーディオストリームの情報をリクエストする\n(AudioPlayer.StreamRequestedイベント)
  deactivate client
  activate cic

    cic - ->> client : 再生できるオーディオストリームの情報を送信する\n(AudioPlayer.StreamDeliverディレクティブ)
  deactivate cic
  activate client
    client -> client : AudioPlayer.StreamDeliverディレクティブのaudioStreamフィールドを解析する
end

client -> client : オーディオ再生を開始する

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS949
Language: en
Country: US
--></g></svg>