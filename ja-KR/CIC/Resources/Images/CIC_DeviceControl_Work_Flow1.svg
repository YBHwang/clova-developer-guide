<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="955px" preserveAspectRatio="none" style="width:836px;height:955px;" version="1.1" viewBox="0 0 836 955" width="836px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="66.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="171.4473"/><rect fill="#FFFFFF" height="447.8242" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="485.2715"/><rect fill="#FFFFFF" height="402.7891" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="238.4121"/><rect fill="#FFFFFF" height="110.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="822.1309"/><rect fill="#FFFFFF" height="559.7539" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="646" x="13" y="366.3418"/><rect fill="#FFFFFF" height="382.3418" style="stroke: none; stroke-width: 1.0;" width="646" x="13" y="543.7539"/><rect fill="#FFFFFF" height="199.4121" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="447" x="202" y="719.6836"/><rect fill="#FFFFFF" height="88.9648" style="stroke: none; stroke-width: 1.0;" width="447" x="202" y="830.1309"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="62" x2="62" y1="102.4824" y2="943.0957"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="274" x2="274" y1="102.4824" y2="943.0957"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="610" x2="610" y1="102.4824" y2="943.0957"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="33" y="89.8457">ユーザー</text><ellipse cx="62" cy="13" fill="#9EA0CA" rx="8" ry="8" style="stroke: #000000; stroke-width: 2.0;"/><path d="M62,21 L62,48 M49,29 L75,29 M62,48 L49,63 M62,48 L75,63 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><rect fill="#9EA0CA" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="124" x="212" y="48.2529"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="229" y="81.4063">クライアント</text><rect fill="#05D686" height="53.2295" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.5;" width="58" x="581" y="48.2529"/><text fill="#FFFFFF" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="598" y="81.4063">CIC</text><rect fill="#FFFFFF" height="66.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="171.4473"/><rect fill="#FFFFFF" height="447.8242" style="stroke: #000000; stroke-width: 1.0;" width="10" x="269" y="485.2715"/><rect fill="#FFFFFF" height="402.7891" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="238.4121"/><rect fill="#FFFFFF" height="110.9648" style="stroke: #000000; stroke-width: 1.0;" width="10" x="605" y="822.1309"/><line style="stroke: #000000; stroke-width: 1.0;" x1="267" x2="257" y1="171.4473" y2="167.4473"/><line style="stroke: #000000; stroke-width: 1.0;" x1="267" x2="257" y1="171.4473" y2="175.4473"/><line style="stroke: #000000; stroke-width: 1.0;" x1="62" x2="268" y1="171.4473" y2="171.4473"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="168" x="81.5" y="140.3281">クライアント制御リクエスト：</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="113" y="156.8105">"GPSをオンにして"</text><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="238.4121" y2="234.4121"/><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="238.4121" y2="242.4121"/><line style="stroke: #000000; stroke-width: 1.0;" x1="274" x2="604" y1="238.4121" y2="238.4121"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="273" x="303" y="207.293">SpeechRecognizer.Recognizeイベントを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="221" x="329" y="223.7754">(Device.DeviceStateコンテキストは必須)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="615" x2="657" y1="338.3418" y2="338.3418"/><line style="stroke: #000000; stroke-width: 1.0;" x1="657" x2="657" y1="338.3418" y2="351.3418"/><line style="stroke: #000000; stroke-width: 1.0;" x1="616" x2="657" y1="351.3418" y2="351.3418"/><polygon fill="#000000" points="626,347.3418,616,351.3418,626,355.3418,622,351.3418" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="632" y="274.2578">クライアントでサポートされている</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="632" y="290.7402">動作かどうかを確認する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="632" y="307.2227">(Device.DeviceStateの</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="170" x="632" y="323.7051">actions[]フィールドを確認する)</text><path d="M18,366.3418 L92,366.3418 L92,394.3418 L82,404.3418 L13,404.3418 L13,371.3418 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="559.7539" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="646" x="13" y="366.3418"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="38" y="391.1875">alt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="340" x="117" y="392.1875">[リクエストされた動作がサポートされているか == いいえ]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="485.2715" y2="481.2715"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="485.2715" y2="489.2715"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="604" y1="485.2715" y2="485.2715"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="287" x="298.5" y="454.1523">SpeechSynthesizer.Speakディレクティブを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="284" x="300" y="470.6348">(「リクエストした操作はサポートされていません」)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="62" x2="72" y1="535.7539" y2="531.7539"/><line style="stroke: #000000; stroke-width: 1.0;" x1="62" x2="72" y1="535.7539" y2="539.7539"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="62" x2="268" y1="535.7539" y2="535.7539"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="93.5" y="521.1172">音声メッセージを出力する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="659" y1="544.7539" y2="544.7539"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="327" x="28" y="568.5996">[リクエストされた動作がサポートされているか == はい]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="641.2012" y2="637.2012"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="289" y1="641.2012" y2="645.2012"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="609" y1="641.2012" y2="641.2012"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="240" x="324.5" y="610.082">クライアント制御ディレクティブを送信する</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="213" x="338" y="626.5645">(DeviceControl.TurnOnディレクティブ)</text><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="321" y1="691.6836" y2="691.6836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="321" x2="321" y1="691.6836" y2="704.6836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="280" x2="321" y1="704.6836" y2="704.6836"/><polygon fill="#000000" points="290,700.6836,280,704.6836,290,708.6836,286,704.6836" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="296" y="677.0469">デバイス制御リクエストを処理する</text><path d="M207,719.6836 L281,719.6836 L281,747.6836 L271,757.6836 L202,757.6836 L202,724.6836 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="199.4121" rx="5" ry="5" style="stroke: #000000; stroke-width: 2.0;" width="447" x="202" y="719.6836"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="227" y="744.5293">alt</text><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="306" y="745.5293">[デバイス制御の処理結果 == 成功]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="822.1309" y2="818.1309"/><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="822.1309" y2="826.1309"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="604" y1="822.1309" y2="822.1309"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="271" x="306.5" y="807.4941">DeviceControl.ActionExecutedイベントを送信する</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="202" x2="649" y1="831.1309" y2="831.1309"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="217" y="854.9766">[デバイス制御の処理結果 == 失敗]</text><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="911.0957" y2="907.0957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="603" x2="593" y1="911.0957" y2="915.0957"/><line style="stroke: #000000; stroke-width: 1.0;" x1="279" x2="604" y1="911.0957" y2="911.0957"/><text fill="#000000" font-family="&quot;Malgun Gothic&quot;, sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="255" x="314.5" y="896.459">DeviceControl.ActionFailedイベントを送信する</text><!--
@startuml
scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName "Malgun Gothic", sans-serif

skinparam note {
  BackgroundColor #9EA0CA
  BorderColor #ffffff
  FontColor #ffffff
  FontSize 14
  FontStyle bold
}

skinparam sequence {
  ArrowColor #000000
  ActorBorderColor #000000
  ActorFontStyle Bolder


  LifeLineBorderColor #000000
  LifeLineBackgroundColor transparent
  ParticipantBorderColor transparent
  ParticipantFontSize 14
  ParticipantFontColor #ffffff
  ParticipantFontStyle bold

  BoxBorderColor #000000
  BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
hide footbox

skinparam activity {
  BackgroundColor #9EA0CA
  BarColor #ffffff
  BorderColor #ffffff
  DiamondBackgroundColor #05D686
  DiamondBorderColor #ffffff
  DiamondFontColor #ffffff
  DiamondFontSize 14
  DiamondFontStyle bold
  FontColor #ffffff 
  FontSize 14
  FontStyle bold
}

actor ユーザー as user #9EA0CA
participant クライアント as client #9EA0CA
participant CIC as cic #05D686

user ->> client : クライアント制御リクエスト：\n"GPSをオンにして"

activate client
  client ->> cic : SpeechRecognizer.Recognizeイベントを送信する\n(Device.DeviceStateコンテキストは必須)

deactivate client

activate cic
  cic -> cic : クライアントでサポートされている\n動作かどうかを確認する\n(Device.DeviceStateの\nactions[]フィールドを確認する)

  alt リクエストされた動作がサポートされているか == いいえ

    cic - ->> client : SpeechSynthesizer.Speakディレクティブを送信する\n(「リクエストした操作はサポートされていません」)

	activate client
    client - ->> user : 音声メッセージを出力する

  else リクエストされた動作がサポートされているか == はい

    cic - ->> client : クライアント制御ディレクティブを送信する\n(DeviceControl.TurnOnディレクティブ)

	deactivate cic
    client -> client : デバイス制御リクエストを処理する

    alt デバイス制御の処理結果 == 成功

      client ->> cic : DeviceControl.ActionExecutedイベントを送信する

	  activate cic

    else デバイス制御の処理結果 == 失敗

      client ->> cic : DeviceControl.ActionFailedイベントを送信する

    end

  end

  deactivate client

deactivate cic

@enduml

PlantUML version 1.2018.12(Sun Oct 21 19:15:15 KST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS949
Language: en
Country: US
--></g></svg>