scale max 880 width
skinparam sequenceMessageAlign center
skinparam shadowing false
skinparam roundcorner 10
skinparam padding 10
skinparam defaultFontSize 12
skinparam defaultFontName sans-serif
skinparam sequence {
	ArrowColor #000000
	ActorBorderColor #000000
	ActorFontStyle Bolder

	LifeLineBorderColor #000000
	LifeLineBackgroundColor transparent
	ParticipantBorderColor transparent
	ParticipantFontSize 14
	ParticipantFontColor #ffffff
	ParticipantFontStyle bold

	BoxBorderColor #000000
	BoxFontColor #ffffff
    BoxFontSize 14
    BoxFontStyle bold
}
skinparam note {
	BackgroundColor #9EA0CA
	BorderColor #ffffff
	FontColor #ffffff
	FontSize 14
	FontStyle bold
}
hide footbox

actor "User" as user
participant "Client app\nor paired app" as app #9EA0CA
participant CEK as cek #05D686
actor "Developer" as dev #9EA0CA
participant Extension as ext #9EA0CA
participant "Authorization server" as auth #9EA0CA

dev ->> cek: Register authentication information (OAuth 2.0)\l- Authorization URL\l- Client ID\l- Client secret\l- Redirect URI\l- Access token URI\l- ...

activate cek
deactivate cek

user ->> app: Enable extension

activate app
  app ->> cek: Request authorization URL

  activate cek
    cek -->> app: Return authorization URL
  deactivate cek

  app ->> auth: Request login page (authorization URL)

  activate auth
    auth -->> app: Return login page
  deactivate auth

  app -> app: Display login page
  user ->> app: Authenticate account (login)
  app ->> auth: Request authorization

  activate auth
  auth -->> app: Return Authorization code with redirect URI
  deactivate auth

  app ->> cek: Pass the\lauthorization code
deactivate app

  activate cek
      cek ->> auth: Pass authorization code as a parameter to the access token URI
      activate auth
        auth -->> cek: Return access token
      deactivate auth

    cek -> cek: Save the access token\nto user account information
    cek ->> ext: Send the user request with the access token
    deactivate cek
    activate ext
